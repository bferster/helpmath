<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<link REL="SHORTCUT ICON" HREF="img/favicon.ico">
		<title>Help Math</title>
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>	
		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
		<script src="lib/jquery.ui.touch-punch.min.js"></script>
		<script src="app.js"></script>
		<script src="video.js"></script>
		<script src="interact.js"></script>
		<script src="keyterms.js"></script>

	</head>
	<style>
		 body { 			font-family:SegoeUI,Verdana,Geneva,sans-serif; font-size:16px; box-sizing:border-box; 
							padding:0; margin:0; width:100%; 
							}
		.hm-main { 			width:calc(100vw - 48px); height:calc(100vh - 48px); user-select: none; display:none; border-radius:16px; 
							background-color:#ddd; margin:24px 0 0 24px;
							}
		.hm-login {			text-align:center; color:#185b9d; width:50%; display:none; margin:4vh 25%; 
							}
		.hm-screen {		width:60%; border-radius:12px; max-height:calc(100vh - 180px); overflow:hidden; margin:8px 16% 0 16%
							}

		.hm-video {			border-radius:12px; overflow:hidden; border:3px solid #185b9d; position:relative;
							}
		.hm-timeSlider { 	width:calc(100% - 52px); margin: 16px 12px 0 12px; background-color:#185b9d; height:4px; border-radius:12px; display:inline-block;
							}
		.hm-timeSlider.ui-slider .ui-slider-handle { height:16px; width:16px; cursor:pointer; background:#185b9d; border-radius:12px; margin-top:-2px;
							}
		.hm-module {		text-align:center; color:#185b9d; width:50%; margin-left:25%;
							}
		.hm-confirm {		position:absolute;  width:300px; padding: 16px; left:calc(50% - 150px); top:calc(50vh - 50px); user-select:none;	
							border-radius: 8px; background-color: #fff; border: 1px solid #999; box-shadow: 4px 2px 12px 2px #aaa; 
							}
		.hm-popup {			position:absolute;  width: auto; max-width:200px; padding: 12px; left: calc(50% - 100px); top: calc(66% - 50px);
							border-radius: 8px; background-color: #eee; border: 1px solid #999; box-shadow: 4px 2px 12px 2px #aaa; 
							font-size: 14px; text-align:center; display:none;
							}
		.hm-is {			border-radius:16px; padding:0 8px; width:250px; height: 24px; border:1px solid #999; font-size: 13px;
							}
		.hm-bs {			cursor: pointer; color:#fff; text-align: center; border-radius: 16px; display: inline-block;
							font-size: 16px; background-color: #185b9d; padding: 4px 12px 4px 12px; vertical-align:3px; user-select:none;
							} 
		.hm-modbut {		cursor: pointer; color:#fff; text-align: center; border-radius: 16px; width: fit-content; display: inline-block; margin:8px;
							font-size: 16px; background-color: #185b9d; padding: 4px 12px 4px 12px; vertical-align:3px; user-select:none;
							} 
		.hm-topicbut {		cursor: pointer; color:#fff; text-align: center; border-radius: 16px; width: fit-content; margin:12px;
							font-size: 16px; background-color: #185b9d; padding: 4px 12px 4px 12px; vertical-align:3px; user-select:none;
							} 
		.hm-iconButton {	margin:0 0 0 16px; cursor:pointer;
							}
		.hm-audioSlider { 	width:80px; background-color:#aaa; height:4px; border-radius:12px; margin-left:16px; display:inline-block; vertical-align:8px;
							}
		.hm-audioSlider.ui-slider .ui-slider-handle { height:28px; width:28px; cursor:pointer; margin-top:-4px; background:url("img/speaker.png") no-repeat;
							}					
		.hm-lessonbut {		cursor: pointer; color:#185b9d; text-align: center; border-radius: 16px; width: fit-content; display:inline-block; margin:8px;
							font-size: 14px; background-color: #dddd; padding: 4px 12px 4px 12px; vertical-align:3px; user-select:none; border: 1px solid #185b9d;
							} 
		.hm-lessonTitle {	color:#f46200; font-size:2.5vw; font-weight:bold; font-family:ComicSans,sans-serif; 
							} 
		.hm-lessonSubTitle{	color:#185b9d; font-size:1.4vw; font-weight:bold;  margin-top:3px;
							} 
		.hm-page {			font-size:12px; background-color:#aaa; color:#fff; display:inline-block; text-align:center; border-right:1px solid #ddd; cursor:pointer;
							}
		.hm-next {			position:absolute; width:6vw; left:calc(84vw - 24px); top:calc(5.8vw + 15vw + 56px); cursor:pointer;
							}

		.hm-terms {			position:absolute;  user-select:none; top:0; left:0; padding:24px; width:calc(100% - 48px); height:calc(100% - 48px); background-color:#ced6e7;
							}
		.hm-alphaterm {		display:inline-block; color:#fff; border-radius:12px; margin-right: 4px; background-color:#185b9d; 
							width:16px; height:15px; cursor:pointer; font-size:10px; text-align:center; padding-top:1px;
							}
		.hm-termitem {		cursor: pointer; color:#000099; border-radius: 16px; width: fit-content; margin:8px; font-size: 14px; 
							background-color: #dddd; padding: 1px 8px 1px 8px; vertical-align:3px; user-select:none; border: 1px solid #185b9d;
							}


		:root  {			--maxvh: 100vh  }
		table  {			border-spacing: 0px;  }
		@font-face {  		font-family: SegoeUI; src: url(img/segoeui.ttf);   }
		@font-face {  		font-family: ComicSans; src: url(img/comicbd.ttf); }

		body ::-webkit-scrollbar { width: 9px; height:8px } 
		body ::-webkit-scrollbar-track { background: transparent; }
		body ::-webkit-scrollbar-thumb { border-radius:8px ;background:#185b9d }
		body ::-webkit-scrollbar-thumb:hover { background: #fff }
</style>

	<body>
		<div class="hm-login" id="hm-login">
			<span style="font-size:3vw;font-weight:900">Welcome to HELP MATH!</span><br>
			<img src="img/logo.png" style="margin:3vw 0;width:33%"><br><b>Login ID &nbsp; &nbsp; </b> 
			<input class='hm-is' style="width:120px" type='text' id='hm-loginUser'><br>
			<b>Password &nbsp; </b>  <input class='hm-is' style="width:120px;margin-top:8px" type='text' id='hm-loginPassword'><br><br>
			<div class="hm-bs" id="hm-login">GO</div>
		</div>
		<div class="hm-main" id="hm-main"></div>
	
<script>

	var app=null;																					// Holds app
	var vid=null;																					// Video module
	var act=null;																					// Interaction module
	var key=null;																					// Keyterms module
	var curLesson=null;																				// Point to current lesson
	var curPage=null;																				// Points at current page
	var isMobile=false;																				// Mobile?
	var isLocal=window.location.host == "localhost" ? true : false;

	$(document).ready(function() {								           							// ON PAGE LOADED
		app=new App();																				// Load app
		let url=window.location.search.substring(1);												// Get query line
		let v=url.split("&");																		// Get options
		$("#hm-login").on("click",()=> { 															// ON LOG IN
			Sound("click");																			// Click sound
			app.userId=$("#hm-loginPassword").val().trim().toLowerCase();							// Set password
			$("#hm-login").fadeOut(()=>{ $("#hm-main").fadeIn(); app.LogIn();  })					// Fade out login / fade in main
			})

		$(window).on("keydown",function(e) {														// HANDLE KEYPRESS
			if (e.which == 109)	vid.RunPlayer("seek",vid.curTime-.1);			
			if (e.which == 107)	vid.RunPlayer("seek",vid.curTime+.1);			
			if ((e.which == 81) && e.ctrlKey)	{													// Test key (CTL-Q)
				}
			});

		if (isLocal) { $("#hm-main").fadeIn();app.ShowLesson(); 	return;	}						// Debug mode
		$("#hm-login").fadeIn(1000);																// Fade in splash page
		});

	$(window).on("resize orientationchange", ()=>{                                       			// ON WINDOW RESIZE
		document.documentElement.style.setProperty("--maxvh", window.innerHeight+"px");				// Set CSS var for IOS 100vh isssue
		});


/////////////////////////////////////////////////////////////////////////////////////////////////
// HELPERS 
/////////////////////////////////////////////////////////////////////////////////////////////////

	function trans(msg)																				// TRANSLATE TEXT
	{
		if (app.language != "English")	msg="~"+msg+"~";												// If not English
		return msg;																						// Return message
	}

	function trace(msg, p1, p2, p3, p4)																// CONSOLE 
	{
		if (p4 != undefined)
			console.log(msg,p1,p2,p3,p4);
		else if (p3 != undefined)
			console.log(msg,p1,p2,p3);
		else if (p2 != undefined)
			console.log(msg,p1,p2);
		else if (p1 != undefined)
			console.log(msg,p1);
		else
			console.log(msg);
	}

	function Sound(sound, mute)																		// PLAY SOUND
	{
		var snd=new Audio();																			// Init audio object
		if (sound.match(/\.mp3/i))		snd=new Audio(sound)											// If an MP3 file
		else							snd=new Audio("img/"+sound+".mp3");								// Use built in mp3
		if (!mute)	{																					// If not initing or muting	
			snd.volume=100/100;																			// Set volume
			snd.play();																					// Play it
			}
		}

	function PopUp(msg, time, div)																	// TIMED POPUP
	{
		var str="";
		$("#popupDiv").remove();																		// Kill old one, if any
		str+="<div id='popupDiv' class='lz-popup'>"; 													// Add div
		if (time == -1) {																				// If has close but
			time=100000;																				// Increase time
			str+="<img id='pu-close' src='img/closedot.gif' style='float:right;cursor:pointer'>";		// Add close button
			}
		str+=msg+"</div>"; 																				// Add div
		$(div ? "#"+div : "body").append(str);															// Add popup to div or body
		$("#pu-close").click(function() { $("#popupDiv").remove(); });									// Remove on click of close but
		$("#popupDiv").fadeIn(500).delay(time ? time*1000 : 3000).fadeOut(500);							// Animate in and out		
	}

	function LoadingIcon(mode)																	// SHOW/HIDE LOADING ICON		
	{
		if (!mode) {																				// If hiding
			$("#lz-loadingIcon").remove();															// Remove it
			return;																					// Quit
			}
		let str="<div id='lz-loadingIcon' style='position:absolute;top:calc(50% - 64px);left:calc(50% - 64px);z-index:5000;text-align:center'>";
		str+="<img src='img/loading.gif' width='128'>";												// Img
		str+="<div id='lz-loadingIconText' style='margin-top:-78px;color:#999'></div></div>";		// Progress
		$("body").append(str);																		// Add icon to container
	}


</script>
</body>
</html>



